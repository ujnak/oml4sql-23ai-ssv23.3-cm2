SQL> @oml4sql-classification-random-forest
SQL> -----------------------------------------------------------------------
SQL> --   Oracle Machine Learning for SQL (OML4SQL) 23ai
SQL> --
SQL> --   Classification - Random Forest Algorithm - dmrfdemo_model2.sql
SQL> --
SQL> --   Copyright (c) 2024 Oracle Corporation and/or its affilitiates.
SQL> --
SQL> --  The Universal Permissive License (UPL), Version 1.0
SQL> --
SQL> --  https://oss.oracle.com/licenses/upl/
SQL> -----------------------------------------------------------------------
SQL> SET serveroutput ON
SQL> SET trimspool ON
SQL> SET pages 10000
SQL> SET linesize 420
SQL> SET echo ON
SQL> SET long 2000000000
警告: このLONG設定によってJavaメモリーの問題が発生する可能性があります。この設定を引き下げるか、Javaが使用できるメモリーを増やす(あるいはその両方)ことをお薦めします。
SQL>
SQL> -----------------------------------------------------------------------
SQL> --                            SAMPLE PROBLEM
SQL> -----------------------------------------------------------------------
SQL> -- Given demographic data about a set of customers, predict the
SQL> -- customer response to an affinity card program using a classifier
SQL> -- based on Random Forests algorithm.
SQL>
SQL> -----------------------------------------------------------------------
SQL> --                            SET UP AND ANALYZE THE DATA
SQL> -----------------------------------------------------------------------
SQL> -- The data for this sample is composed from base tables in SH Schema
SQL> -- (See Sample Schema Documentation) and presented through these views:
SQL> -- mining_data_build_parallel_v (build data)
SQL> -- mining_data_test_parallel_v  (test data)
SQL> -- mining_data_apply_parallel_v (apply data)
SQL> -- (See dmsh.sql for view definitions).
SQL>
SQL> -----------
SQL> -- ANALYSIS
SQL> -----------
SQL> -- These are the factors to consider for data analysis in random forest:
SQL> --
SQL> -- 1. Missing Value Treatment for Predictors
SQL> --
SQL> --    Decision Tree implementation in ODM handles missing predictor
SQL> --    values (by penalizing predictors which have missing values)
SQL> --    and missing target values (by simply discarding records with
SQL> --    missing target values).
SQL> --    Other options can be specified by using the ODMS_MISSING_VALUE_TREATMENT
SQL> --    setting.
SQL> --
SQL> -- 2. Binning high cardinality data
SQL> --    No data preparation for the types we accept is necessary - even
SQL> --    for high cardinality predictors.  Preprocessing to reduce the
SQL> --    cardinality (e.g., binning) can improve the performance of the build.
SQL> --
SQL> -- This demo is similar to the Decision Tree demo. But instead of building a
SQL> -- decision tree, we build a random forest.We need some additional settings for
SQL> -- building the random forest. The build and score steps for random forest
SQL> -- and decision tree are identical.
SQL> --
SQL> -----------------------------------------------------------------------
SQL> --                            BUILD THE MODEL
SQL> -----------------------------------------------------------------------
SQL>
SQL> -- Cleanup old model with same name for repeat runs
SQL> BEGIN DBMS_DATA_MINING.DROP_MODEL('RF_SH_Clas_Sample');
  2  EXCEPTION WHEN OTHERS THEN NULL; END;
  3  /

PL/SQLプロシージャが正常に完了しました。

SQL>
SQL> --------------------------------
SQL> -- PREPARE BUILD (TRAINING) DATA
SQL> --
SQL> -- The decision tree algorithm is very capable of handling data which
SQL> -- has not been specially prepared.  For this example, no data preparation
SQL> -- will be performed.
SQL> --
SQL>
SQL> -------------------
SQL> -- SPECIFY SETTINGS
SQL> --
SQL> -- Cleanup old cost table for repeat runs
SQL> BEGIN EXECUTE IMMEDIATE 'DROP TABLE rf_sh_sample_cost';
  2  EXCEPTION WHEN OTHERS THEN NULL; END;
  3  /

PL/SQLプロシージャが正常に完了しました。

SQL>
SQL> -- CREATE AND POPULATE A COST MATRIX TABLE
SQL> --
SQL> -- A cost matrix is used to influence the weighting of misclassification
SQL> -- during model creation (and scoring).
SQL> -- See Oracle Data Mining Concepts Guide for more details.
SQL> --
SQL> CREATE TABLE rf_sh_sample_cost (
  2    actual_target_value           NUMBER,
  3    predicted_target_value        NUMBER,
  4    cost                          NUMBER);

Table RF_SH_SAMPLE_COSTは作成されました。

SQL> INSERT INTO rf_sh_sample_cost VALUES (0,0,0);

1行挿入しました。

SQL> INSERT INTO rf_sh_sample_cost VALUES (0,1,1);

1行挿入しました。

SQL> INSERT INTO rf_sh_sample_cost VALUES (1,0,8);

1行挿入しました。

SQL> INSERT INTO rf_sh_sample_cost VALUES (1,1,0);

1行挿入しました。

SQL>
SQL> ---------------------
SQL> -- CREATE A NEW MODEL
SQL> --
SQL> -- Build a RF model using CREATE_MODEL2
SQL> DECLARE
  2    v_setlst DBMS_DATA_MINING.SETTING_LIST;
  3  BEGIN
  4    -- Populate settings list
  5    v_setlst('ALGO_NAME') := 'ALGO_RANDOM_FOREST';
  6    v_setlst('CLAS_COST_TABLE_NAME') := 'rf_sh_sample_cost';
  7    v_setlst('RFOR_NUM_TREES') := '25';
  8
  9    -- Examples of other possible settings are:
 10    --(v_setlst('RFOR_MTRY') := '5');
 11    -- rfor_mtry specifies the number of attributes that are to be
 12    -- randomly chosen for computing splits at each node of the trees in
 13    -- the forest.
 14    --(v_setlst('RFOR_SAMPLING_RATIO') := '0.5');
 15    --(v_setlst('ODMS_RANDOM_SEED') := '41');
 16    --(v_setlst('TREE_IMPURITY_METRIC') := 'TREE_IMPURITY_ENTROPY');
 17    --(v_setlst('TREE_TERM_MAX_DEPTH') := '5');
 18    --(v_setlst('TREE_TERM_MINREC_SPLIT') := '5');
 19    --(v_setlst('TREE_TERM_MINPCT_SPLIT') := '2');
 20    --(v_setlst('TREE_TERM_MINREC_NODE') := '5');
 21    --(v_setlst('TREE_TERM_MINPCT_NODE') := '0.05');
 22
 23    DBMS_DATA_MINING.CREATE_MODEL2(
 24      model_name          => 'RF_SH_Clas_Sample',
 25      mining_function     => 'CLASSIFICATION',
 26      data_query          => 'select * from mining_data_build_parallel_v',
 27      set_list            => v_setlst,
 28      case_id_column_name => 'cust_id',
 29      target_column_name  => 'affinity_card');
 30  END;
 31  /

PL/SQLプロシージャが正常に完了しました。

SQL>
SQL> -------------------------
SQL> -- DISPLAY MODEL SETTINGS
SQL> --
SQL> column setting_name format a30
SQL> column setting_value format a30
SQL> SELECT setting_name, setting_value
  2    FROM user_mining_model_settings
  3   WHERE model_name = 'RF_SH_CLAS_SAMPLE'
  4  ORDER BY setting_name;

SETTING_NAME                   SETTING_VALUE
------------------------------ ------------------------------
ALGO_NAME                      ALGO_RANDOM_FOREST
CLAS_COST_TABLE_NAME           rf_sh_sample_cost
CLAS_MAX_SUP_BINS              32
CLAS_WEIGHTS_BALANCED          OFF
ODMS_DETAILS                   ODMS_ENABLE
ODMS_MISSING_VALUE_TREATMENT   ODMS_MISSING_VALUE_AUTO
ODMS_RANDOM_SEED               0
ODMS_SAMPLING                  ODMS_SAMPLING_DISABLE
PREP_AUTO                      ON
RFOR_NUM_TREES                 25
RFOR_SAMPLING_RATIO            .5
TREE_IMPURITY_METRIC           TREE_IMPURITY_GINI
TREE_TERM_MAX_DEPTH            16
TREE_TERM_MINPCT_NODE          .05
TREE_TERM_MINPCT_SPLIT         .1
TREE_TERM_MINREC_NODE          10
TREE_TERM_MINREC_SPLIT         20

17行が選択されました。

SQL>
SQL> --------------------------
SQL> -- DISPLAY MODEL SIGNATURE
SQL> --
SQL> column attribute_name format a40
SQL> column attribute_type format a20
SQL> SELECT attribute_name, attribute_type
  2    FROM user_mining_model_attributes
  3   WHERE model_name = 'RF_SH_CLAS_SAMPLE'
  4  ORDER BY attribute_name;

ATTRIBUTE_NAME                           ATTRIBUTE_TYPE
---------------------------------------- --------------------
AFFINITY_CARD                            CATEGORICAL
AGE                                      NUMERICAL
BASEBALL                                 NUMERICAL
CRICKET                                  NUMERICAL
CUST_GENDER                              CATEGORICAL
CUST_MARITAL_STATUS                      CATEGORICAL
EDUCATION                                CATEGORICAL
HOUSEHOLD_SIZE                           CATEGORICAL
OCCUPATION                               CATEGORICAL
SOCCER                                   NUMERICAL
TENNIS                                   NUMERICAL
UNKNOWN                                  NUMERICAL
YRS_RESIDENCE                            NUMERICAL

13行が選択されました。

SQL>
SQL> --------------------------
SQL> -- DISPLAY MODEL VIEWS
SQL> --
SQL>
SQL> -- Get a list of model views
SQL> col view_name format a30
SQL> col view_type format a50
SQL> SELECT view_name, view_type FROM user_mining_model_views
  2    WHERE model_name='RF_SH_CLAS_SAMPLE'
  3    ORDER BY view_name;

VIEW_NAME                      VIEW_TYPE
------------------------------ --------------------------------------------------
DM$VARF_SH_CLAS_SAMPLE         Variable Importance
DM$VCRF_SH_CLAS_SAMPLE         Scoring Cost Matrix
DM$VGRF_SH_CLAS_SAMPLE         Global Name-Value Pairs
DM$VSRF_SH_CLAS_SAMPLE         Computed Settings
DM$VTRF_SH_CLAS_SAMPLE         Classification Targets
DM$VWRF_SH_CLAS_SAMPLE         Model Build Alerts

6行が選択されました。

SQL>
SQL> ------------------------
SQL> -- DISPLAY MODEL metdata
SQL> --
SQL> column string_value format a12
SQL> column setting_name format a12
SQL> column setting_value format a14
SQL>
SQL> select name, numeric_value, string_value from DM$VGRF_SH_CLAS_SAMPLE
  2  order by name;

NAME                           NUMERIC_VALUE STRING_VALUE
------------------------------ ------------- ------------
AVG_DEPTH                             10.800
AVG_NODECOUNT                         78.840
MAX_DEPTH                             13.000
MAX_NODECOUNT                         91.000
MIN_DEPTH                             12.000
MIN_NODECOUNT                         71.000
NUM_ROWS                            1500.000

7行が選択されました。

SQL>
SQL> -- Get computed settings --
SQL> select setting_name, setting_value from DM$VSRF_SH_CLAS_SAMPLE;

SETTING_NAME SETTING_VALUE
------------ --------------
RFOR_MTRY    8

SQL>
SQL> --Get variable importance for the forest --
SQL> column attribute_name format a30
SQL> select attribute_name, attribute_importance
  2  from DM$VARF_SH_CLAS_SAMPLE
  3  order by  attribute_importance desc, attribute_name asc;

ATTRIBUTE_NAME                 ATTRIBUTE_IMPORTANCE
------------------------------ --------------------
AGE                                      1.168E+000
YRS_RESIDENCE                            9.535E-001
EDUCATION                                 8.84E-001
OCCUPATION                                8.09E-001
HOUSEHOLD_SIZE                           7.229E-001
CUST_MARITAL_STATUS                      4.283E-001
CRICKET                                    1.7E-001
BASEBALL                                 1.673E-001
SOCCER                                   1.558E-001
UNKNOWN                                  7.219E-002
TENNIS                                   6.997E-002
CUST_GENDER                              5.855E-002
COUNTRY_NAME                                      0
CUST_INCOME_LEVEL                                 0
GOLF                                              0
MISC                                              0

16行が選択されました。

SQL>
SQL> -----------------------------------------------------------------------
SQL> --                               TEST THE MODEL
SQL> -----------------------------------------------------------------------
SQL>
SQL> --------------------
SQL> -- PREPARE TEST DATA
SQL> --
SQL> -- If the data for model creation has been prepared, then the data used
SQL> -- for testing the model must be prepared to the same scale in order to
SQL> -- obtain meaningful results.
SQL> -- In this case, no data preparation is necessary since model creation
SQL> -- was performed on the raw (unprepared) input.
SQL> --
SQL>
SQL> ------------------------------------
SQL> -- COMPUTE METRICS TO TEST THE MODEL
SQL> --
SQL> -- Other demo programs demonstrate how to use the PL/SQL API to
SQL> -- compute a number of metrics, including lift and ROC.  This demo
SQL> -- only computes a confusion matrix and accuracy, but it does so
SQL> -- using the SQL data mining functions.
SQL> --
SQL> -- In this example, we experiment with using the cost matrix
SQL> -- that was provided to the create routine.  In this example, the
SQL> -- cost matrix reduces the problematic misclassifications, but also
SQL> -- negatively impacts the overall model accuracy.
SQL>
SQL> -- DISPLAY CONFUSION MATRIX WITHOUT APPLYING COST MATRIX
SQL> --
SQL> SELECT affinity_card AS actual_target_value,
  2         PREDICTION(RF_SH_Clas_Sample USING *) AS predicted_target_value,
  3         COUNT(*) AS value
  4    FROM mining_data_test_parallel_v
  5  GROUP BY affinity_card, PREDICTION(RF_SH_Clas_Sample USING *)
  6  ORDER BY 1,2;

ACTUAL_TARGET_VALUE PREDICTED_TARGET_VALUE      VALUE
------------------- ---------------------- ----------
                  0                      0       1043
                  0                      1        111
                  1                      0        141
                  1                      1        205

SQL>
SQL> -- DISPLAY CONFUSION MATRIX APPLYING THE COST MATRIX
SQL> --
SQL> SELECT affinity_card AS actual_target_value,
  2         PREDICTION(RF_SH_Clas_Sample COST MODEL USING *)
  3           AS predicted_target_value,
  4         COUNT(*) AS value
  5    FROM mining_data_test_parallel_v
  6  GROUP BY affinity_card, PREDICTION(RF_SH_Clas_Sample COST MODEL USING *)
  7  ORDER BY 1,2;

ACTUAL_TARGET_VALUE PREDICTED_TARGET_VALUE      VALUE
------------------- ---------------------- ----------
                  0                      0        669
                  0                      1        485
                  1                      0         21
                  1                      1        325

SQL>
SQL> -- DISPLAY ACCURACY WITHOUT APPLYING COST MATRIX
SQL> --
SQL> SELECT ROUND(SUM(correct)/COUNT(*),4) AS accuracy
  2    FROM (SELECT DECODE(affinity_card,
  3                 PREDICTION(RF_SH_Clas_Sample USING *), 1, 0) AS correct
  4            FROM mining_data_test_parallel_v);

ACCURACY
--------
     .83

SQL>
SQL> -- DISPLAY ACCURACY APPLYING THE COST MATRIX
SQL> --
SQL> SELECT ROUND(SUM(correct)/COUNT(*),4) AS accuracy
  2    FROM (SELECT DECODE(affinity_card,
  3                   PREDICTION(RF_SH_Clas_Sample COST MODEL USING *),
  4                   1, 0) AS correct
  5            FROM mining_data_test_parallel_v);

ACCURACY
--------
     .66

SQL>
SQL> -----------------------------------------------------------------------
SQL> --                               APPLY THE MODEL
SQL> -----------------------------------------------------------------------
SQL>
SQL> ------------------
SQL> -- BUSINESS CASE 1
SQL> -- Find the 10 customers who live in Italy that are least expensive
SQL> -- to be convinced to use an affinity card.
SQL> --
SQL> SELECT cust_id FROM
  2  (SELECT cust_id,
  3          rank() over (order by PREDICTION_COST(RF_SH_Clas_Sample,
  4                       1 COST MODEL USING *) ASC, cust_id) rnk
  5     FROM mining_data_apply_parallel_v
  6    WHERE country_name = 'Italy')
  7  where rnk <= 10
  8  order by rnk;

   CUST_ID
----------
    100733
    100179
    101445
    100662
    100554
    100081
    100344
    100185
    101345
    100324

10行が選択されました。

SQL>
SQL> ------------------
SQL> -- BUSINESS CASE 2
SQL> -- Find the average age of customers who are likely to use an
SQL> -- affinity card.
SQL> -- Include the build-time cost matrix in the prediction.
SQL> -- Only take into account CUST_MARITAL_STATUS, EDUCATION, and
SQL> -- HOUSEHOLD_SIZE as predictors.
SQL> -- Break out the results by gender.
SQL> --
SQL> column cust_gender format a12
SQL> SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
  2    FROM mining_data_apply_parallel_v
  3   WHERE PREDICTION(rf_sh_clas_sample COST MODEL
  4                   USING cust_marital_status, education, household_size) = 1
  5  GROUP BY cust_gender
  6  ORDER BY cust_gender;

CUST_GENDER         CNT    AVG_AGE
------------ ---------- ----------
F                   179         27
M                   697         31

SQL>
SQL> ------------------
SQL> -- BUSINESS CASE 3
SQL> -- List ten customers (ordered by their id) along with likelihood and cost
SQL> -- to use or reject the affinity card (Note: while this example has a
SQL> -- binary target, such a query is useful in multi-class classification -
SQL> -- Low, Med, High for example).
SQL> --
SQL> column prediction format 9
SQL> column probability format 9.999999999
SQL> column cost format 9.999999999
SQL> SELECT T.cust_id, S.prediction, S.probability, S.cost
  2    FROM (SELECT cust_id,
  3                 PREDICTION_SET(rf_sh_clas_sample COST MODEL USING *) pset
  4            FROM mining_data_apply_parallel_v
  5           WHERE cust_id < 100011) T,
  6         TABLE(T.pset) S
  7  ORDER BY cust_id, S.prediction;

   CUST_ID PREDICTION PROBABILITY COST
---------- ---------- ----------- ----
    100001          0  .948065324 .415477411
    100001          1  .051934676 .948065324
    100002          0  .741860806 2.065113553
    100002          1  .258139194 .741860806
    100003          0  .827131628 1.382946973
    100003          1  .172868372 .827131628
    100004          0  .882410168 .940718659
    100004          1  .117589832 .882410168
    100005          0  .371555194 5.027558449
    100005          1  .628444806 .371555194
    100006          0 1.000000000 .000000000
    100006          1  .000000000 1.000000000
    100007          0  .974031746 .207746032
    100007          1  .025968254 .974031746
    100008          0  .878151249 .974790005
    100008          1  .121848751 .878151249
    100009          0  .361001818 5.111985458
    100009          1  .638998182 .361001818
    100010          0  .831091895 1.351264840
    100010          1  .168908105 .831091895

20行が選択されました。

SQL>
SQL> ------------------
SQL> -- BUSINESS CASE 4
SQL> -- Find the segmentation (prediction and rule) for customers who
SQL> -- work in Tech support and are under 25.
SQL> --
SQL> set long 20000
SQL> set line 300
SQL> set pagesize 100
SQL> column education format a30
SQL> SELECT cust_id, education,
  2         PREDICTION_DETAILS(rf_sh_clas_sample USING *) prediction_details
  3    FROM mining_data_apply_parallel_v
  4   WHERE occupation = 'TechSup' AND age < 25
  5  ORDER BY cust_id;

   CUST_ID EDUCATION                      PREDICTION_DETAILS
---------- ------------------------------ --------------------------------------------------------------------------------
    100099 HS-grad                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="2.216" rank="1"/>
                                          <Attribute name="AGE" actualValue="19" weight=".77" rank="2"/>
                                          <Attribute name="CRICKET" actualValue="1" weight=".127" rank="3"/>
                                          <Attribute name="EDUCATION" actualValue="HS-grad" weight=".09" rank="4"/>
                                          <Attribute name="BASEBALL" actualValue="1" weight=".076" rank="5"/>
                                          </Details>

    100125 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="1" weight="1.668" rank="1"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".41" rank="2"/>
                                          <Attribute name="CRICKET" actualValue="0" weight=".157" rank="3"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".116" rank="4"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".075"
                                          rank="5"/>
                                          </Details>

    100152 HS-grad                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="2.99" rank="1"/>
                                          <Attribute name="EDUCATION" actualValue="HS-grad" weight=".096" rank="2"/>
                                          <Attribute name="OCCUPATION" actualValue="TechSup" weight=".034" rank="3"/>
                                          <Attribute name="CUST_GENDER" actualValue="F" weight="-.009" rank="4"/>
                                          <Attribute name="CRICKET" actualValue="0" weight="-.041" rank="5"/>
                                          </Details>

    100187 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.134" rank="1"/>
                                          <Attribute name="AGE" actualValue="14" weight=".747" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".1" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="divorced" weight=".068" rank=
                                          "4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".023" rank="5"/>
                                          </Details>

    100202 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.299" rank="1"/>
                                          <Attribute name="UNKNOWN" actualValue="0" weight=".13" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".09" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".069"
                                          rank="4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".03" rank="5"/>
                                          </Details>

    100234 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="2" weight="1.398" rank="1"/>
                                          <Attribute name="AGE" actualValue="9" weight=".949" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".076" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".066"
                                          rank="4"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".044" rank="5"/>
                                          </Details>

    100259 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="2.93" rank="1"/>
                                          <Attribute name="AGE" actualValue="23" weight="1.157" rank="2"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".1" rank="3"/>
                                          <Attribute name="OCCUPATION" actualValue="TechSup" weight=".034" rank="4"/>
                                          <Attribute name="CRICKET" actualValue="1" weight=".027" rank="5"/>
                                          </Details>

    100304 Assoc-A                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.538" rank="1"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".658" rank="2"/>
                                          <Attribute name="UNKNOWN" actualValue="0" weight=".16" rank="3"/>
                                          <Attribute name="CRICKET" actualValue="0" weight=".157" rank="4"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".102" rank="5"/>
                                          </Details>

    100320 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="2" weight="1.398" rank="1"/>
                                          <Attribute name="AGE" actualValue="13" weight=".949" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".076" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".066"
                                          rank="4"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".044" rank="5"/>
                                          </Details>

    100349 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="1" weight="1.377" rank="1"/>
                                          <Attribute name="AGE" actualValue="13" weight=".813" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".092" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".019" rank="5"/>
                                          </Details>

    100419 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="1" weight="1.335" rank="1"/>
                                          <Attribute name="AGE" actualValue="10" weight=".851" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".093" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".044" rank="5"/>
                                          </Details>

    100448 HS-grad                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="2.976" rank="1"/>

   CUST_ID EDUCATION                      PREDICTION_DETAILS
---------- ------------------------------ --------------------------------------------------------------------------------
                                          <Attribute name="EDUCATION" actualValue="HS-grad" weight=".1" rank="2"/>
                                          <Attribute name="OCCUPATION" actualValue="TechSup" weight=".039" rank="3"/>
                                          <Attribute name="CUST_GENDER" actualValue="M" weight=".002" rank="4"/>
                                          <Attribute name="CRICKET" actualValue="0" weight="-.041" rank="5"/>
                                          </Details>

    100489 Assoc-A                        <Details algorithm="" class="0">
                                          <Attribute name="AGE" actualValue="14" weight="1.505" rank="1"/>
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.131" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".108" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="TENNIS" actualValue="0" weight="-.006" rank="5"/>
                                          </Details>

    100583 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="AGE" actualValue="13" weight="4.127" rank="1"/>
                                          <Attribute name="YRS_RESIDENCE" actualValue="2" weight="2.78" rank="2"/>
                                          <Attribute name="UNKNOWN" actualValue="1" weight=".792" rank="3"/>
                                          <Attribute name="TENNIS" actualValue="0" weight=".099" rank="4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".072" rank="5"/>
                                          </Details>

    100643 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="AGE" actualValue="14" weight="1.401" rank="1"/>
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.356" rank="2"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".449" rank="3"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".097" rank="4"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="5"/>
                                          </Details>

    100657 HS-grad                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="0" weight="1.335" rank="1"/>
                                          <Attribute name="AGE" actualValue="7" weight=".851" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".093" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".044" rank="5"/>
                                          </Details>

    100670 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.238" rank="1"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".091" rank="2"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".069"
                                          rank="3"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".029" rank="4"/>
                                          <Attribute name="TENNIS" actualValue="0" weight=".012" rank="5"/>
                                          </Details>

    100824 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="AGE" actualValue="14" weight="1.548" rank="1"/>
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.131" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="9+" weight=".112" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="TENNIS" actualValue="0" weight="-.006" rank="5"/>
                                          </Details>

    100851 HS-grad                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.134" rank="1"/>
                                          <Attribute name="AGE" actualValue="14" weight=".8" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="9+" weight=".103" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="divorced" weight=".068" rank=
                                          "4"/>
                                          <Attribute name="CRICKET" actualValue="1" weight=".02" rank="5"/>
                                          </Details>

    100952 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="AGE" actualValue="14" weight="1.401" rank="1"/>
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.356" rank="2"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".449" rank="3"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".097" rank="4"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="5"/>
                                          </Details>

    100993 Assoc-V                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.299" rank="1"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".093" rank="2"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".069"
                                          rank="3"/>
                                          <Attribute name="EDUCATION" actualValue="Assoc-V" weight=".032" rank="4"/>
                                          <Attribute name="CRICKET" actualValue="1" weight=".02" rank="5"/>
                                          </Details>

    101043 Assoc-V                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.218" rank="1"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="9+" weight=".116" rank="2"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="divorced" weight=".082" rank=
                                          "3"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".044" rank="4"/>
                                          <Attribute name="UNKNOWN" actualValue="0" weight=".024" rank="5"/>
                                          </Details>

    101158 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="AGE" actualValue="14" weight="1.559" rank="1"/>

   CUST_ID EDUCATION                      PREDICTION_DETAILS
---------- ------------------------------ --------------------------------------------------------------------------------
                                          <Attribute name="YRS_RESIDENCE" actualValue="1" weight="1.36" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".1" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="TENNIS" actualValue="0" weight="-.006" rank="5"/>
                                          </Details>

    101171 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="2" weight="1.397" rank="1"/>
                                          <Attribute name="AGE" actualValue="11" weight=".92" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".078" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".066"
                                          rank="4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".021" rank="5"/>
                                          </Details>

    101218 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.538" rank="1"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".658" rank="2"/>
                                          <Attribute name="UNKNOWN" actualValue="0" weight=".16" rank="3"/>
                                          <Attribute name="CRICKET" actualValue="0" weight=".157" rank="4"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".102" rank="5"/>
                                          </Details>

    101222 Assoc-V                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.134" rank="1"/>
                                          <Attribute name="AGE" actualValue="14" weight=".813" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="9+" weight=".103" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="CRICKET" actualValue="1" weight=".02" rank="5"/>
                                          </Details>

    101225 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="2" weight="1.377" rank="1"/>
                                          <Attribute name="AGE" actualValue="11" weight=".813" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".092" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".019" rank="5"/>
                                          </Details>

    101338 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="2" weight="1.377" rank="1"/>
                                          <Attribute name="AGE" actualValue="11" weight=".813" rank="2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="6-8" weight=".092" rank="3"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".068"
                                          rank="4"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".019" rank="5"/>
                                          </Details>

    101405 Bach.                          <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="1.403" rank="1"/>
                                          <Attribute name="AGE" actualValue="16" weight=".243" rank="2"/>
                                          <Attribute name="BASEBALL" actualValue="0" weight=".201" rank="3"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="1" weight=".125" rank="4"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="never married" weight=".075"
                                          rank="5"/>
                                          </Details>

    101422 Assoc-A                        <Details algorithm="" class="1">
                                          <Attribute name="EDUCATION" actualValue="Assoc-A" weight=".25" rank="1"/>
                                          <Attribute name="SOCCER" actualValue="1" weight=".237" rank="2"/>
                                          <Attribute name="CRICKET" actualValue="1" weight=".173" rank="3"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="3" weight=".124" rank="4"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="married" weight=".088" rank="
                                          5"/>
                                          </Details>

    101438 HS-grad                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="3" weight="2.089" rank="1"/>
                                          <Attribute name="AGE" actualValue="16" weight="1.85" rank="2"/>
                                          <Attribute name="UNKNOWN" actualValue="1" weight="1.385" rank="3"/>
                                          <Attribute name="EDUCATION" actualValue="HS-grad" weight=".091" rank="4"/>
                                          <Attribute name="OCCUPATION" actualValue="TechSup" weight=".043" rank="5"/>
                                          </Details>

    101480 < Bach.                        <Details algorithm="" class="0">
                                          <Attribute name="YRS_RESIDENCE" actualValue="1" weight="1.475" rank="1"/>
                                          <Attribute name="CUST_MARITAL_STATUS" actualValue="divorced" weight=".086" rank=
                                          "2"/>
                                          <Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".084" rank="3"/>
                                          <Attribute name="EDUCATION" actualValue="&lt; Bach." weight=".027" rank="4"/>
                                          <Attribute name="TENNIS" actualValue="0" weight=".012" rank="5"/>
                                          </Details>


32行が選択されました。

SQL> spool oml4sql-classification-regression-xgboost
